{% extends 'base.html' %}
{% block title %}Edit Entry #{{ form_id }}{% endblock %}
{% block content %}
<main class="container my-4">
  <h1>Edit Entry #{{ form_id }}: {{ template_name }}</h1>
  <p class="text-muted">Originally submitted at {{ timestamp }}</p>
  <form method="post">
    {% for field in fields %}
      <div class="mb-3 d-flex align-items-center">
        <label for="{{ field.label|replace(' ', '_') }}" class="form-label me-3" style="width:150px;">
          {{ field.label }}
        </label>

        {% if field.type == 'dropdown' %}
          <select
            id="{{ field.label|replace(' ', '_') }}"
            name="{{ field.label }}"
            class="form-select flex-fill"
            {% if field.help %}title="{{ field.help }}"{% endif %}
          >
            {% for opt in field.options %}
              <option value="{{ opt }}" {% if data[field.label] == opt %}selected{% endif %}>
                {{ opt }}
              </option>
            {% endfor %}
          </select>

        {% elif field.type == 'number' %}
          <input
            type="number"
            id="{{ field.label|replace(' ', '_') }}"
            name="{{ field.label }}"
            class="form-control flex-fill"
            value="{{ data[field.label] }}"
            {% if field.help %}placeholder="{{ field.help }}" title="{{ field.help }}"{% endif %}
          >

        {% elif field.type == 'textarea' %}
          <textarea
            id="{{ field.label|replace(' ', '_') }}"
            name="{{ field.label }}"
            class="form-control flex-fill"
            rows="3"
            {% if field.help %}placeholder="{{ field.help }}" title="{{ field.help }}"{% endif %}
          >{{ data[field.label] }}</textarea>

        {% else %}
          <input
            type="text"
            id="{{ field.label|replace(' ', '_') }}"
            name="{{ field.label }}"
            class="form-control flex-fill"
            value="{{ data[field.label] }}"
            {% if field.help %}placeholder="{{ field.help }}" title="{{ field.help }}"{% endif %}
          >
        {% endif %}
      </div>
    {% endfor %}
    <button type="submit" class="btn btn-primary">Save Changes</button>
    <a href="{{ url_for('view_form', form_id=form_id) }}" class="btn btn-secondary ms-2">Cancel</a>
  </form>
</main>
{% endblock %}
